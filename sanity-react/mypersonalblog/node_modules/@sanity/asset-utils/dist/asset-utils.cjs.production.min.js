"use strict";function t(){return(t=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}).apply(this,arguments)}function e(t){return(e=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function r(t,e){return(r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function n(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function o(t,e,s){return(o=n()?Reflect.construct:function(t,e,n){var o=[null];o.push.apply(o,e);var s=new(Function.bind.apply(t,o));return n&&r(s,n.prototype),s}).apply(null,arguments)}function s(t){var n="function"==typeof Map?new Map:void 0;return(s=function(t){if(null===t||-1===Function.toString.call(t).indexOf("[native code]"))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(t))return n.get(t);n.set(t,s)}function s(){return o(t,arguments,e(this).constructor)}return s.prototype=Object.create(t.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}),r(s,t)})(t)}Object.defineProperty(exports,"__esModule",{value:!0});var i=Object.freeze({left:0,top:0,bottom:0,right:0}),a=Object.freeze({x:.5,y:.5,height:1,width:1}),u=function(){return t({},i)},f=function(){return t({},a)},p=function(t){var e,r;function n(e,r){var n;return void 0===r&&(r="Failed to resolve asset ID from source"),(n=t.call(this,r)||this).unresolvable=!0,n.input=e,n}return r=t,(e=n).prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r,n}(s(Error));function c(t){return Boolean(t.unresolvable&&"input"in t)}function l(t){return function(){try{return t.apply(void 0,arguments)}catch(t){if(c(t))return;throw t}}}var d="https://cdn.sanity.io",h=/^[a-f0-9]+\.[a-z0-9]+$/,x=/^file-[a-f0-9]+-[a-z0-9]+$/,g=/^[a-f0-9]+-\d+x\d+\.[a-z0-9]+$/,m=/^image-[a-f0-9]+-\d+x\d+-[a-z0-9]+$/,y=/^(?:images|files)\/([a-z0-9]+)\/([a-z0-9][-\w]*)\//,v=/^(?:image-[a-f0-9]+-\d+x\d+-[a-z0-9]+|file-[a-f0-9]+-[a-z0-9]+)$/,w={projectId:"a",dataset:"b"};function b(t){return O(t)&&"string"==typeof t._ref}function I(t){return O(t)&&"string"==typeof t._id}function j(t){return O(t)&&"string"==typeof t.path}function F(t){return O(t)&&"string"==typeof t.url}function A(t){var e=t;return O(e)&&e.asset&&"object"==typeof e.asset}function O(t){return null!==t&&!Array.isArray(t)&&"object"==typeof t}function _(t,e){if(!e)throw new Error("Project details (projectId and dataset) required to resolve path for image");var r=t.metadata.dimensions;return"images/"+e.projectId+"/"+e.dataset+"/"+t.assetId+"-"+r.width+"x"+r.height+"."+t.extension}function P(t,e){return d+"/"+_(t,e)}function D(t,e){if(!e)throw new Error("Project details (projectId and dataset) required to resolve path for file");return"files/"+e.projectId+"/"+e.dataset+"/"+t.assetId+"."+t.extension}function E(t,e){return d+"/"+D(t,e)}function z(t){return A(t)?z(t.asset):b(t)?void 0:"string"==typeof t?y.test(G(t)||"")?S(t):void 0:j(t)?t.path:F(t)?S(t.url):void 0}function S(t){if(y.test(t))return t;if(!t.startsWith(d+"/"))throw new p('Failed to resolve path from URL "'+t+'"');var e=t.indexOf("?");return t.slice(d.length+1,-1===e?void 0:e)}var G=l(S);function R(t){var e=(G(t)||t).replace(/^(images|files)\/[a-z0-9]+\/[a-z0-9][-\w]\/*/,"");if(!$(e))throw new p('Failed to resolve filename from URL "'+t+'"');return e}var U=l(R);function $(t){return h.test(t)||g.test(t)}function M(t){if(m.test(t))return L(t);if(x.test(t))return T(t);throw new Error("Invalid image/file asset ID: "+t)}function T(t){if(!x.test(t))throw new Error("Malformed file asset ID '"+t+'\'. Expected an id like "file-027401f31c3ac1e6d78c5d539ccd1beff72b9b11-pdf"');var e=t.split("-");return{type:"file",assetId:e[1],extension:e[2]}}function L(t){var e=t.split("-"),r=e[1],n=e[2],o=e[3],s=(n||"").split("x").map(Number),i=s[0],a=s[1];if(!(r&&n&&o&&i>0&&a>0))throw new Error("Malformed asset ID '"+t+'\'. Expected an id like "image-027401f31c3ac1e6d78c5d539ccd1beff72b9b11-2000x3000-jpg".');return{type:"image",assetId:r,width:i,height:a,extension:o}}function C(t){var e=L(Y(t)),r=e.width,n=e.height;return{width:r,height:n,aspectRatio:r/n}}var H=l(C);function W(t){return at(t)?J(t,w).asset.extension:q(t,w).asset.extension}var k=l(W);function q(t,e){var r=t;return{asset:N(t,e||ot(t)),crop:r.crop||u(),hotspot:r.hotspot||f()}}var B=l(q);function N(e,r){var n=r||nt(e),o=Y(e),s=(e.asset||e).metadata||{},i=L(o),a=i.width,u=i.height,f={_id:o,_type:"sanity.imageAsset",assetId:i.assetId,extension:i.extension,metadata:t({},s,{dimensions:{width:a,height:u,aspectRatio:a/u}}),url:"",path:""};return t({},f,{path:_(f,n),url:P(f,n)})}var V=l(N);function J(t,e){return{asset:Q(t,e||ot(t))}}var K=l(J);function Q(e,r){var n=r||nt(e),o=Y(e),s=e.asset||e,i=T(o),a={_id:o,_type:"sanity.fileAsset",assetId:i.assetId,extension:i.extension,metadata:s.metadata||{},url:"",path:""};return t({},a,{path:D(a,n),url:E(a,n)})}var X=l(Q);function Y(t){var e=A(t)?t.asset:t,r="";if("string"==typeof e?r=tt(e):b(e)?r=e._ref:I(e)?r=e._id:j(e)?r=rt(d+"/"+e.path):F(e)&&(r=rt(e.url)),!r||!v.test(r))throw new p(t);return r}var Z=l(Y);function tt(t){if(v.test(t))return t;if(0===t.indexOf(d+"/images")||0===t.indexOf(d+"/files"))return rt(t);if(y.test(t))return rt(d+"/"+t);if(it(t))return rt(d+"/files/a/b/"+t);if(st(t))return rt(d+"/images/a/b/"+t);throw new p(t)}var et=l(tt);function rt(t){var e=S(t).split("/"),r=e[3];return e[0].replace(/s$/,"")+"-"+r.replace(/\./g,"-")}function nt(t){var e=z(t);if(!e)throw new p(t,"Failed to resolve project ID and dataset from source");var r=e.match(y)||[],n=r[1],o=r[2];if(!n||!o)throw new p(t,"Failed to resolve project ID and dataset from source");return{projectId:n,dataset:o}}var ot=l(nt);function st(t){return g.test(t)}function it(t){return h.test(t)}function at(t){return Y(t).startsWith("file-")}exports.DEFAULT_CROP=i,exports.DEFAULT_HOTSPOT=a,exports.buildFilePath=D,exports.buildFileUrl=E,exports.buildImagePath=_,exports.buildImageUrl=P,exports.getAssetDocumentId=Y,exports.getDefaultCrop=u,exports.getDefaultHotspot=f,exports.getExtension=W,exports.getFile=J,exports.getFileAsset=Q,exports.getIdFromString=tt,exports.getImage=q,exports.getImageAsset=N,exports.getImageDimensions=C,exports.getProject=nt,exports.getUrlFilename=R,exports.getUrlPath=S,exports.isAssetFilename=function(t){return st(t)||it(t)},exports.isAssetIdStub=I,exports.isAssetObjectStub=A,exports.isAssetPathStub=j,exports.isAssetUrlStub=F,exports.isDefaultCrop=function(t){return t.top===i.top&&t.bottom===i.bottom&&t.left===i.left&&t.right===i.right},exports.isDefaultHotspot=function(t){return t.x===a.x&&t.y===a.y&&t.width===a.width&&t.height===a.height},exports.isFileAssetFilename=it,exports.isFileSource=at,exports.isImageAssetFilename=st,exports.isImageSource=function(t){return Y(t).startsWith("image-")},exports.isObject=O,exports.isReference=b,exports.isSanityFileAsset=function(t){return O(t)&&"sanity.fileAsset"===t._type},exports.isValidFilename=$,exports.parseAssetFilename=function(t){var e=U(t)||"";if(!$(e))throw new Error("Invalid image/file asset filename: "+t);try{return M((g.test(e)?"image":"file")+"-"+e.replace(/\.([a-z+]+)$/i,"-$1"))}catch(e){throw new Error("Invalid image/file asset filename: "+t)}},exports.parseAssetId=M,exports.parseFileAssetId=T,exports.parseImageAssetId=L,exports.tryGetAssetDocumentId=Z,exports.tryGetAssetPath=z,exports.tryGetExtension=k,exports.tryGetFile=K,exports.tryGetFileAsset=X,exports.tryGetIdFromString=et,exports.tryGetImage=B,exports.tryGetImageAsset=V,exports.tryGetImageDimensions=H,exports.tryGetProject=ot,exports.tryGetUrlFilename=U,exports.tryGetUrlPath=G;
//# sourceMappingURL=asset-utils.cjs.production.min.js.map
